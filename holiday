<div id="holiday_page_container">
    <div class="container">
        <h1 id="mm_post_title" class="main_title"></h1>
        <div id="mm_post_content"></div>
        
        <h2 id="section1_title" class="subpage_title"></h2>
        <div id="section1_content" class="subpage_content regular_hours"></div>
    </div>
    <div id="section2">
        <div class="container">
            <img src="" id="holiday_hours">
            <div id="section2_content"></div>
        </div>
    </div>
    <div class="section" id="section3">
        <div class="container">
            <h2 id="section3_title" class="subpage_title"></h2>
            <div id="section3_content"></div>
            <div class="button_containers>
                
            </div>
            <img src="" id="holiday_hours">
        </div>
    </div>
</div>
<script>
    $(document).ready(function(e) {                
        // init(e);
        
        function renderAll(){
            renderPageHTML();
        }
        
        function renderPageHTML(){
            
            prefix = get_prefix();
            var pages_json = prefix + "/pages/southcentre-all-things-holiday.json"
            console.log(pages_json);
            $.getJSON(pages_json).done(function(data) {
                document.title = data.title;
                $('#mm_post_title').html(data.title);
                $('#mm_post_content').html(data.body);
                if(data.subpages){
                    $('#section1_title').html(data.subpages[0].title);
                    $('#section1_content').html(data.subpages[0].body);
                    $('#section2_content').html(data.subpages[1].body);
                    $('#section3_title').html(data.subpages[2].title);
                    $('#section3_content').html(data.subpages[2].body);
                }
                console.log(data);
            });
            // Holiday Hours
            repo = getRepoDetailsByName('Holiday Page Background 1');
            if(repo && repo.images) {
                var repo = repo.images[0];
                $("#section2").css({"background-image":"url("+repo.image_url+")"})
            }
            var repo2 = getRepoDetailsByID("46295");
            if(repo2){
                $("#holiday_hours").attr('src',repo2.image_url);
            }
            // All about santa 
            repo = getRepoDetailsByName('Holiday Page Background 2');
            if(repo && repo.images) {
                var repo = repo.images[0];
                $("#section3").css({"background-image":"url("+repo.image_url+")"})
            }
            var repo2 = getRepoDetailsByID("46295");
            if(repo2){
                $("#holiday_hours").attr('src',repo2.image_url);
            }
        }
        
        function renderPageData(feature_image_template, feature_image_container, imageName){
            var item_list = [];
            var item_rendered = [];
            var banner_template_html = $(feature_image_template).html();
            Mustache.parse(banner_template_html);   // optional, speeds up future uses
            $.each(imageName, function(key, val) {
                val.image_file_name=val.image_file_name;
            });
            $(feature_image_container).show();
            $(feature_image_container).html(item_rendered.join(''));
        }
        
        loadMallData(renderAll);
    });
    function renderGeneral(container, template, collection){
        var item_list = [];
        var item_rendered = [];
        var template_html = $(template).html();
        Mustache.parse(template_html); 
        $.each( collection , function( key, val ) {
            
            val.template_image = "//mallmaverick.com" + val.photo_url;
            
            var repo_rendered = Mustache.render(template_html,val);
            item_rendered.push(repo_rendered);
        });
        $(container).html(item_rendered.join(''));
    }
</script>